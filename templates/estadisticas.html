{% extends "base.html" %}
{% block content %}

<h2 class="mb-4 text-center">üìä Estad√≠sticas de visitas</h2>

<div class="container">

    <!-- DONUT -->
    <div class="row justify-content-center mb-5">
        <div class="col-md-6 text-center">
            <h4>Departamentos m√°s visitados (Donut)</h4>
            <canvas id="visitasDonut" style="max-width: 380px; margin: auto; height: 400px; width: 400px;"></canvas>
        </div>
    </div>

</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {

    // DATOS DESDE FLASK
    const donutLabels = {{ labels | tojson }};
    const donutValues = {{ values | tojson }};

    const barLabels = {{ labels | tojson }};
    const barValues = {{ values | tojson }};

    console.log("Donut:", donutLabels, donutValues);
    console.log("Barras:", barLabels, barValues);


    /* -----------------------------
       üìå 1 - GR√ÅFICO DONUT
    ------------------------------ */
    const ctxDonut = document.getElementById("visitasDonut");

    if (ctxDonut) {
        new Chart(ctxDonut, {
            type: 'doughnut',
            data: {
                labels: donutLabels,
                datasets: [{
                    data: donutValues,
                    backgroundColor: [
                        '#4e73df',
                        '#1cc88a',
                        '#36b9cc',
                        '#f6c23e',
                        '#e74a3b',
                        '#858796'
                    ]
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'bottom' }
                }
            }
        });
    }
});
</script>

{% endblock %}
